import { StatusBar } from 'expo-status-bar';
import { Text, View, StyleSheet, Image } from 'react-native';
import { WebView } from 'react-native-webview';
import { useEffect, useRef, useState } from 'react';
import LottieView from 'lottie-react-native';
import CallForm from './components/form';
// import { Image } from 'react-native-web';
import Svg, { Path, G, Defs, ClipPath } from 'react-native-svg';
import { Avatar, Banner, Button, HStack } from '@react-native-material/core';
import Icon from '@expo/vector-icons/MaterialCommunityIcons';

// end call with requestCancelCall
// initcall with startCallFunction
// const htmlFILEr = require('./assets/webview/kiosk/index.html');
// const StyledPressable = styled(Pressable);

export default function App () {
  const [isReady, setIsReady] = useState(false);
  const [started, setStarted] = useState(false);
  const [loading, setLoading] = useState(true);
  const [inCall, setInCall] = useState(false);
  const [error, setCurrentError] = useState(null);
  const webViewRef = useRef(null);
  const animationRef = useRef();
  useEffect(() => {
    if (loading) {
      animationRef.current.play();
    } else {
      animationRef.current.pause();
    }
  }, [loading]);
  function startCall () {
    webViewRef.current.postMessage({ type: 'requestStartCall' });
  }

  return (
    <View className='flex-1 items-center justify-center bg-blue-100 w-full h-full'>
      <View className='w-full flex justify-center items-center absolute top-0' style={{ height: '30%', paddingVertical: 10 }}>
        <Svg viewBox='-30 -70 200 200' width='136' height='127' fill='none' xmlns='http://www.w3.org/2000/svg'>
          <G clip-path='url(#a)' fill='#0097ee'>
            <Path d='M121.8 0H13.742C6.023.017.014 6.032 0 13.762v72.265c0 7.73 6.012 13.725 13.73 13.756 4.062.014 8.123.045 12.181-.026 1.1-.02 1.31.329 1.304 1.353-.046 6.896 0 13.793-.037 20.701 0 2.064.619 3.712 2.522 4.681 1.988 1.013 3.692.448 5.347-.873 10.224-8.21 20.458-16.413 30.702-24.608a5.05 5.05 0 0 1 3.422-1.242c17.562.041 35.124.05 52.686.025 8.216 0 14.123-5.884 14.126-14.073V14.16C135.991 5.868 130.11 0 121.8 0Zm.032 90.712c-18.412 0-36.825-.006-55.24-.018a6.45 6.45 0 0 0-4.282 1.486 6806.664 6806.664 0 0 1-24.965 20.003c-.259.205-.529.395-1.07.8V95.748c0-3.185-1.83-5.028-4.988-5.034H14.148c-3.251 0-5.066-1.826-5.066-5.104-.008-23.801-.006-47.611.006-71.431 0-3.284 1.803-5.105 5.049-5.105h107.774c3.172 0 5.016 1.84 5.016 5.005v71.568c0 3.255-1.824 5.064-5.095 5.064Z' />
            <Path d='m102.208 66.279-16.642-9.074v8.952c0 3.097-1.743 5.04-4.808 5.402-.377.042-.756.063-1.136.063H39.696c-3.16 0-5.02-1.257-5.788-3.76a6.086 6.086 0 0 1-.193-1.818V33.887c0-3.48 2.062-5.536 5.552-5.536h40.776c3.478 0 5.506 2.056 5.515 5.558v8.924l16.639-9.057.011 32.503Z' />
          </G><Defs><ClipPath id='a'><Path fill='#0097ee' d='M0 0h136v127H0z' /></ClipPath></Defs>
        </Svg>
        <Svg width='260' height='90' fill='none' xmlns='http://www.w3.org/2000/svg'>
          <G clip-path='url(#a)' fill='#0097ee'>
            <Path d='M25 43.6c-1.3-1-3.2-1.8-5.6-2.4l-5-1.2c-3.2-.8-5.3-1.4-6.2-1.9-1.3-.7-1.9-1.9-1.9-3.5 0-1.5.5-2.8 1.7-3.9 1.1-1.1 3-1.7 5.6-1.7 3.2 0 5.5.9 6.9 2.6.7 1 1.2 2.2 1.4 4.1l.1.3h5v-.1c0-4.2-1.2-7.3-3.8-9.2-2.6-1.9-5.8-2.8-9.5-2.8-4.1 0-7.3 1.1-9.5 3.3-2.3 2.2-3.4 5-3.4 8.4 0 3.2 1.2 5.6 3.6 7.2 1.3.9 3.6 1.7 6.7 2.5l4.7 1.1c2.5.6 4.3 1.3 5.5 2.1 1.1.7 1.6 2 1.6 3.8 0 2.4-1.3 4.1-3.9 5-1.4.5-2.9.8-4.6.8-3.7 0-6.4-1.1-7.8-3.4-.8-1.2-1.2-3-1.3-4.9v-.6H-.2v.6c-.1 4.1 1.2 7.4 3.8 9.8C5.8 61.8 9.4 63 13.9 63c3.8 0 7.2-.9 10.1-2.6 3-1.8 4.5-4.9 4.5-9 0-3.4-1.2-6-3.5-7.8ZM69 38.1c-1.4-2.8-4-4.1-7.7-4.1-1.7 0-3.3.4-4.7 1.1-1.2.6-2.2 1.5-3.2 2.7-.5-.9-1.1-1.6-1.7-2.1-1.4-1.1-3.2-1.7-5.4-1.7-1.9 0-3.8.5-5.3 1.6-.5.4-1 1-2 1.8V35h-5v27h5V47.5c0-3.3.7-5.5 2-6.7 1.3-1.2 2.7-1.8 4.2-1.8 1.6 0 2.7.5 3.2 1.6.4.7.5 2 .5 3.7V62h6V46.1c0-2.6.4-4.4 1.5-5.5 1.2-1.1 2.4-1.6 4-1.6 1.1 0 1.8.3 2.6.9.7.6.8 1.6.8 3.2V62h6V43.9c.2-2.4-.1-4.4-.8-5.8ZM99.5 57.9c-.3 0-.5.1-.7.1h-.6c-.6 0-.9-.2-.9-.2-.1-.2-.3-.5-.3-.8V41.7c0-2.7-.9-4.7-3-6-2-1.2-4.5-1.9-7.7-1.9-2.7 0-5.2.7-7.2 2-2.2 1.4-3.3 4-3.4 7.4v.7h5.1l.1-.6c.2-1.3.5-2.3 1-2.9.9-1.1 2.4-1.7 4.5-1.7 1.9 0 3.3.3 4.3.9.9.6 1.4 1.5 1.4 2.9 0 .7-.1 1.2-.2 1.5-.3.6-.8.9-1.6 1l-7 .9c-2.6.3-4.7 1.2-6.2 2.6-1.6 1.4-2.4 3.5-2.4 6.1 0 2.4.8 4.4 2.5 6 1.6 1.6 3.8 2.4 6.3 2.4 2.1 0 4-.5 5.8-1.4 1.3-.7 2.5-1.5 3.3-2.4.2.6.4 1.2.6 1.6.8 1.2 2 1.9 3.7 1.9.7 0 1.2 0 1.5-.1l1.6-.4v-4.5l-.5.2Zm-7.5-9v2.7c0 2.5-1.2 4.3-3.5 5.5-1.4.7-2.9 1-4.3 1-1.2 0-2.2-.3-3-1-.8-.6-1.2-1.5-1.2-2.6 0-1.5.6-2.6 1.8-3.3.7-.4 1.9-.7 3.4-.9l2.7-.3c.8-.1 1.8-.3 2.6-.5.5-.2.5-.4 1.5-.6ZM116.7 34.1c-.5 0-.7-.1-.9-.1h-.4c-1.9 0-3.4.7-4.8 2.1-.7.7-1.5 1.3-1.5 1.8V35h-5v27h5V46.3c0-1.8.6-3.3 1.7-4.7 1.1-1.3 2.7-2 4.7-2h.7c.2 0 .2 0 .5.1l.4.1V34l-.4.1ZM131 39v-4h-4v-8h-6v8h-3v4h3v17.2c0 1.8.4 3.3 1.2 4.4.8 1.2 2.4 1.8 4.6 1.8.7 0 1.3 0 1.8-.1.6-.1 1.3-.2 1.8-.3l.5-.1v-4.5l-.7.1c-.3 0-.7.1-.9.1h-.7c-.9 0-1.1-.1-1.3-.2-.3-.1-.4-.4-.4-1.4V39h4.1ZM157.2 25l-10.5 31.3L136.2 25h-4.6l12.9 37h4.5l12.8-37h-4.6ZM170 35h-4v27h4V35ZM170 25h-4v5h4v-5ZM196 25v12.9c-1-1.1-1.8-1.9-3.1-2.6-1.8-.9-3.5-1.3-5.4-1.3-2 0-3.8.4-5.3 1.2-1.5.8-2.8 1.9-3.8 3.2-1 1.3-1.7 2.9-2.2 4.6-.5 1.7-.7 3.5-.7 5.4 0 2 .2 3.8.7 5.5.4 1.7 1.2 3.3 2.2 4.6 1 1.3 2.3 2.3 3.8 3.1 1.5.7 3.4 1.1 5.6 1.1.9 0 1.8-.1 2.7-.4.9-.2 1.8-.6 2.6-1.1.9-.5 1.5-1 2.2-1.7.3-.3.8-.7.8-1.1V62h4V25H196Zm.4 23.3c0 1.5-.2 3-.6 4.3-.4 1.3-.9 2.4-1.6 3.4-.7.9-1.6 1.7-2.6 2.2-1 .5-2.2.8-3.5.8-1.2 0-2.3-.2-3.3-.6-1-.4-1.9-1.1-2.6-1.9-.8-.8-1.4-1.8-1.8-3-.4-1.2-.6-2.6-.6-4.2-.1-1.6.1-3.1.4-4.5.3-1.4.8-2.6 1.5-3.6s1.6-1.8 2.6-2.4c1.1-.6 2.3-.9 3.8-.9 1.3 0 2.4.3 3.4.8 1 .6 1.9 1.3 2.6 2.2.7.9 1.3 2.1 1.7 3.3.4 1.3.6 2.7.6 4.1ZM230 49.3c0-4.8-1-8.7-3.1-11.2-2.1-2.6-5.1-4-8.8-4-1.9 0-3.7.4-5.2 1.1-1.5.8-2.8 1.8-3.9 3.1s-1.9 2.8-2.4 4.6c-.6 1.7-.9 3.6-.9 5.6 0 2 .2 3.8.7 5.5.5 1.7 1.2 3.2 2.2 4.5 1 1.3 2.3 2.3 3.9 3.1 1.6.7 3.4 1.1 5.6 1.1 1.7 0 3.2-.2 4.5-.7 1.3-.5 2.4-1.1 3.4-1.9.9-.8 1.7-1.8 2.4-2.9.6-1.1 1.1-2.3 1.5-3.6l.2-.6h-4.4l-.1.4c-.4 1.8-1.3 3.2-2.6 4.2s-2.9 1.5-4.8 1.5c-1.4 0-2.6-.3-3.6-.8s-1.9-1.2-2.6-2.1c-.7-.9-1.2-1.7-1.5-2.9-.3-1.1-.5-2.2-.5-3.2h20v-.8Zm-4.2-3.3h-15.9c.1-1 .4-1.9.8-2.8.4-1.1 1-2 1.6-2.8.7-.8 1.5-1.4 2.5-1.9.9-.5 2.1-.7 3.3-.7 1.3 0 2.4.2 3.3.7 1 .5 1.8 1.1 2.4 1.8.6.8 1.1 1.7 1.5 2.7.2 1 .4 2 .5 3ZM257.5 42.9c-.5-1.7-1.3-3.3-2.3-4.6-1-1.3-2.4-2.3-3.9-3.1-1.6-.8-3.4-1.1-5.5-1.1s-3.9.4-5.5 1.1c-1.6.8-2.9 1.8-3.9 3.1s-1.8 2.8-2.3 4.5c-.5 1.7-.8 3.6-.8 5.5 0 2.3.3 4.4 1 6.2.7 1.8 1.6 3.3 2.7 4.5 1.1 1.2 2.5 2.2 4 2.8 1.5.6 3.1 1.1 4.9 1.1 1.9 0 3.6-.5 5.1-1.2 1.5-.7 2.9-1.7 4-3s1.9-2.8 2.5-4.6c.6-1.7.9-3.7.9-5.8-.2-1.8-.4-3.7-.9-5.4Zm-3.5 5.5c0 1.4-.2 2.7-.5 4-.3 1.3-.8 2.4-1.5 3.4s-1.5 1.8-2.6 2.3c-1 .6-2.3.9-3.8.9-1.4 0-2.6-.3-3.6-.8s-1.9-1.2-2.6-2.1c-.7-.9-1.2-2.1-1.6-3.4-.4-1.3-.6-2.8-.6-4.3 0-1.4.2-2.7.5-4 .3-1.3.8-2.4 1.5-3.4s1.5-1.7 2.6-2.3c1-.6 2.3-.9 3.8-.9s2.8.3 3.8.8 1.9 1.3 2.5 2.2c.7.9 1.2 2.1 1.5 3.3.4 1.4.6 2.8.6 4.3ZM136.5 70.9l-4.3 12.7-4.2-12.7h-1.7l5.1 14.7h1.6l5.1-14.7h-1.6ZM141.3 74.9h-1.4v10.7h1.4V74.9ZM141.3 70.9h-1.5v2h1.5v-2ZM152.2 70.9v5.5c-.4-.5-.9-.9-1.5-1.2-.7-.3-1.4-.5-2.2-.5-.8 0-1.5.2-2.1.5-.6.3-1.1.7-1.5 1.2-.4.5-.7 1.1-.9 1.8-.2.7-.3 1.4-.3 2.1 0 .8.1 1.5.3 2.2.2.7.5 1.3.8 1.8.4.5.9.9 1.5 1.2.6.3 1.3.4 2.2.4.3 0 .7 0 1-.1.4-.1.7-.2 1-.4.3-.2.6-.4.9-.7.2-.2.4-.4.6-.7v1.6h1.4V70.9h-1.2Zm0 9.3c0 .6-.1 1.2-.2 1.7-.2.5-.4 1-.7 1.4-.3.4-.6.7-1.1.9-.4.2-.9.3-1.5.3-.5 0-1-.1-1.4-.3-.4-.2-.8-.4-1.1-.8-.3-.3-.6-.8-.7-1.3-.2-.5-.3-1.1-.3-1.7 0-.6 0-1.3.2-1.8.1-.6.3-1.1.6-1.5.3-.4.7-.8 1.1-1 .4-.2 1-.4 1.6-.4.5 0 1 .1 1.4.3.4.2.8.5 1.1.9.3.4.5.8.7 1.4.2.8.3 1.3.3 1.9ZM165.4 80.6c0-1.9-.4-3.4-1.2-4.4-.8-1-2-1.5-3.4-1.5-.8 0-1.4.1-2 .4-.6.3-1.1.7-1.5 1.2-.4.5-.7 1.1-1 1.8-.2.7-.3 1.4-.3 2.2 0 .8.1 1.5.3 2.2.2.7.5 1.3.9 1.8s.9.9 1.5 1.2c.6.3 1.3.4 2.2.4.7 0 1.3-.1 1.8-.3.5-.2.9-.4 1.3-.8.4-.3.7-.7.9-1.1.2-.4.4-.9.6-1.4v-.1H164v.1c-.2.7-.5 1.3-1.1 1.7-.5.4-1.2.6-2 .6-.6 0-1.1-.1-1.5-.3-.4-.2-.8-.5-1.1-.9-.3-.4-.5-.8-.6-1.3-.1-.5-.2-1-.2-1.5h7.9Zm-4.7-4.7c.5 0 1 .1 1.4.3.4.2.7.4 1 .8.3.3.5.7.6 1.1.1.4.2.9.2 1.3h-6.6c.1-.5.2-.9.3-1.3.2-.4.4-.8.7-1.1.3-.3.6-.6 1-.8.4-.2.9-.3 1.4-.3ZM176.4 78.1c-.2-.7-.5-1.3-.9-1.8s-.9-.9-1.5-1.2c-.6-.3-1.3-.4-2.2-.4-.8 0-1.5.1-2.1.4-.6.3-1.1.7-1.5 1.2-.4.5-.7 1.1-.9 1.8-.2.7-.3 1.4-.3 2.2 0 .9.1 1.7.4 2.4.3.7.6 1.3 1.1 1.8.4.5 1 .8 1.6 1.1.6.2 1.2.4 1.9.4s1.4-.1 2-.4c.6-.3 1.1-.7 1.6-1.1.4-.5.8-1.1 1-1.8.2-.7.3-1.5.3-2.3-.2-.9-.3-1.6-.5-2.3Zm-4.7-2.2c.6 0 1.2.1 1.6.3.4.2.8.5 1 .9.3.4.5.8.6 1.4.1.5.2 1.1.2 1.7 0 .6-.1 1.1-.2 1.6s-.3 1-.6 1.4c-.3.4-.6.7-1.1 1-.4.2-1 .4-1.6.4-.6 0-1.1-.1-1.5-.3-.4-.2-.8-.5-1.1-.9-.3-.4-.5-.8-.7-1.4-.2-.5-.2-1.1-.2-1.8 0-.6.1-1.1.2-1.6s.3-1 .6-1.4c.3-.4.6-.7 1.1-1 .6-.1 1.1-.3 1.7-.3ZM182 82.8v-3.6h7v-2.7h-7v-2.9h7.6v-2.7h-10.8v14.7H190v-2.8h-8ZM200.6 75.3c-.7-.6-1.6-.9-2.8-.9-.9 0-1.6.2-2.2.7-.3.2-.6.5-.9 1v-1.4h-2.9v10.9h3v-5.9c0-.6.1-1.2.3-1.6.3-.8.9-1.2 1.8-1.2.7 0 1.2.3 1.5.8.1.3.2.7.2 1.3v6.6h3v-7.3c.1-1.4-.2-2.4-1-3ZM211 74.7V76c-.4-.6-.9-1.1-1.5-1.3-.4-.2-.9-.3-1.4-.3-1.5 0-2.6.6-3.4 1.7-.8 1.1-1.2 2.5-1.2 4.1 0 1.7.4 3 1.3 4 .8 1 2 1.5 3.4 1.5.9 0 1.7-.2 2.2-.7.2-.2.5-.5.7-.8v.4c0 1-.1 1.7-.3 2.1-.3.6-1 1-1.9 1-.7 0-1.2-.1-1.5-.4-.2-.1-.3-.4-.4-.7v-.1h-3.2v.1c.1 1.1.6 1.9 1.5 2.5.9.5 2 .8 3.4.8 2.3 0 3.8-.6 4.7-1.9.5-.7.7-1.8.7-3.2V74.7H211Zm0 5.4c0 1.1-.2 1.8-.6 2.3-.4.5-1 .7-1.6.7-.9 0-1.6-.4-1.9-1.3-.2-.5-.3-1-.3-1.6 0-.7.1-1.3.3-1.8.4-.9 1-1.3 1.9-1.3.7 0 1.2.3 1.6.8.4.4.6 1.2.6 2.2ZM225.8 85c-.2-.1-.3-.2-.4-.3-.1-.1-.1-.3-.1-.7V77.9c0-1.3-.5-2.2-1.4-2.7-.9-.5-2-.7-3.2-.7-1.8 0-3.1.5-3.9 1.5-.5.6-.7 1.4-.8 2.4v.1h2.9v-.1c.1-.4.2-.7.4-.9.3-.3.7-.5 1.3-.5.6 0 1 .1 1.3.2.3.2.4.4.4.8 0 .3-.2.6-.5.7-.2.1-.6.2-1.1.2l-1 .1c-1.1.1-1.9.4-2.5.7-1 .6-1.6 1.6-1.6 3 0 1 .3 1.9 1 2.4.6.6 1.5.9 2.5.9.8 0 1.5-.2 2.1-.5.5-.3.9-.6 1.2-.9 0 .2 0 .3.1.5 0 .2.1.4.2.6v.1h3.2l-.1-.8Zm-3.5-4.6v.9c0 .9-.3 1.5-.8 1.9-.5.3-1 .5-1.6.5-.4 0-.7-.1-.9-.3-.2-.2-.4-.5-.4-1s.2-.9.6-1.1c.2-.1.7-.3 1.3-.4l.6-.1c.3-.1.6-.1.8-.2.1 0 .3-.1.4-.2ZM234.4 74.7V76c-.4-.6-.9-1.1-1.5-1.3-.4-.2-.9-.3-1.4-.3-1.5 0-2.6.6-3.4 1.7-.8 1.1-1.2 2.5-1.2 4.1 0 1.7.4 3 1.3 4 .8 1 2 1.5 3.4 1.5.9 0 1.7-.2 2.2-.7.2-.2.5-.5.7-.8v.4c0 1-.1 1.7-.3 2.1-.3.6-1 1-1.9 1-.7 0-1.2-.1-1.5-.4-.2-.1-.3-.4-.3-.7v-.1h-3.2v.1c.1 1.1.6 1.9 1.5 2.5.9.5 2 .8 3.4.8 2.3 0 3.8-.6 4.7-1.9.5-.7.7-1.8.7-3.2V74.7h-3.2Zm0 5.4c0 1.1-.2 1.8-.6 2.3-.4.5-1 .7-1.6.7-.9 0-1.6-.4-1.9-1.3-.2-.5-.3-1-.3-1.6 0-.7.1-1.3.3-1.8.4-.9 1-1.3 1.9-1.3.7 0 1.2.3 1.6.8.4.4.6 1.2.6 2.2ZM249.6 78.8c-.1-.9-.4-1.6-.9-2.3-.5-.7-1.1-1.3-1.9-1.6-.8-.3-1.6-.5-2.5-.5-1.6 0-2.9.5-3.9 1.5s-1.5 2.5-1.5 4.4c0 2 .6 3.5 1.7 4.4 1.1.9 2.4 1.3 3.8 1.3 1.7 0 3.1-.5 4.1-1.6.6-.7 1-1.3 1.1-2v-.1h-3c-.2.3-.3.5-.6.7-.4.3-.9.5-1.5.5s-1.1-.1-1.5-.4c-.6-.4-1-1.1-1.1-2.1h7.8v-.1c0-.9 0-1.6-.1-2.1Zm-7.6.2c.1-.6.3-1.1.7-1.5.4-.4.9-.6 1.6-.6.6 0 1.2.2 1.6.6.4.4.6.9.7 1.5H242ZM257.2 74.4H256.9c-.9 0-1.6.2-2.1.7-.3.2-.6.6-1 1.2v-1.6H251v10.9h3v-5.2c0-.8.1-1.5.3-1.9.4-.7 1.1-1.1 2.2-1.1h.9l-.2-3ZM118.2 81.2c-.4-.5-.9-.7-1.6-.7-.4 0-.7.1-.9.2-.1.1-.3.2-.4.3v-2.1H114v6.7h1.4v-.4l.3.3c.3.2.6.3 1 .3.7 0 1.2-.3 1.5-.8.4-.5.5-1.1.5-1.9.1-.8-.1-1.4-.5-1.9Zm-.9 2c0 .4-.1.7-.3 1-.2.2-.4.4-.7.4-.3 0-.6-.1-.8-.4-.2-.3-.3-.6-.3-1 0-.3 0-.6.1-.8.2-.4.4-.6.9-.6.4 0 .7.2.8.6.3.2.3.4.3.8ZM122.4 80.6l-.9 3.3-1-3.3h-1.6l1.8 5.1s0 .1-.1.2c-.1.2-.1.2-.2.3-.1 0-.1.1-.2.1h-.6v1.2h.7c.6 0 1-.1 1.2-.4.2-.2.4-.8.8-1.7l1.7-4.8h-1.6Z' />
            <Path fill-rule='evenodd' clip-rule='evenodd' d='M255.6 0c1.5-.1 2.9-.1 3.7.7.5.5.7 1.2.6 2.1v22c0 3.9-1 4-5.4 4h-12.7c-.2 0-.4 0-.7.2-5.1 3.6-8.1 5.7-9 6.3l-.2.1c-.6.4-.9.6-1.1.6h-.2c-.2-.1-.2-.4-.2-.9v-6.2c-.2-.1-1.1-.1-2.7-.1-3 0-3-1.9-3-4v-22c0-2.6 1.2-2.8 4.4-2.8h26.5ZM235 21.3h11.7c1 0 1.8-.8 1.9-1.7v-2.4l4 2.5c.1.1.3.1.4 0 .1 0 .2-.1.2-.4v-10c0-.1 0-.3-.2-.4-.1-.1-.3 0-.4.1l-4 2.4V9.3c0-1.1-.9-1.9-1.9-1.9H235c-1.1 0-1.9.9-1.9 1.9v10.1c0 1.1.9 1.9 1.9 1.9Z' />
          </G>
          <Defs>
            <ClipPath id='a'><Path fill='#0097ee' d='M0 0h260v90H0z' /></ClipPath>
          </Defs>
        </Svg>

        {/* <Image source={require('./assets/favicon-white.svg')} /> */}
      </View>
      {error && <Banner
        style={{
          position: 'absolute',
          top: '45%',
          width: '90%',
          zIndex: 1000,
          borderRadius: 10
        }}
        illustration={props => (
          <Avatar
            color='primary'
            icon={props => <Icon name='error' {...props} />}
            {...props}
          />
        )}
        text={'Error: ' + error}
        buttons={
          <HStack spacing={2}>
            <Button key='Refresh' variant='text' title='Refresh' compact />
          </HStack>
        }
                />}

      <WebView
        mediaCapturePermissionGrantType='grantIfSameHostElsePrompt'
        startInLoadingState
        ref={webViewRef}
        incognito
        className='bg-red-400  overflow-hidden hover:bg-blue-700 active:bg-blue-700 active:text-white hover:text-white px-5 py-3 rounded-lg '
        containerStyle={{
          width: '100%',
          height: '100%',
          position: 'absolute',
          zIndex: 10000,
          borderRadius: 10,
          bottom: 200
          // top: inCall && !loading ? 0 : '100%'
        }}
        onLoadEnd={() => {
          setTimeout(() => {
            webViewRef.current.postMessage({ type: 'injectEnvironment', value: 'dev' });
          }, 3000);
        }}
        onMessage={(event) => {
          console.log('received event', event.nativeEvent.data);
          try {
            const reviecedData = event.nativeEvent.data;
            const parsedData = JSON.parse(reviecedData);
            if (parsedData.type === 'PageIsReadyToStart') {
              console.log('PageIsReadyToStart');
              setIsReady(true);
              setLoading(false);
            } else if (parsedData.type === 'LoadingCallStarting') {
              console.log('LoadingCallStarting');
              setLoading(true);
            } else if (parsedData.type === 'CallEnded') {
              console.log('CallEnded');
              setLoading(true);
              setInCall(false);
              webViewRef.current.reload();
            } else if (parsedData.type === 'CallStarted') {
              console.log('CallStarted');
              setLoading(false);
              setInCall(true);
            } else if (parsedData.type === 'Error') {
              setCurrentError(parsedData.error);
            }
          } catch (error) {
            console.log('Unknown Event', error);
            setCurrentError(error);
          }

          // setCurrentMessage(parsedData.type);
        }}
        originWhitelist={['*']}
        onError={(error) => {
          setCurrentError('error loading page');
          console.log('error loading page', error);
        }}
        cacheEnabled={false}
        allowFileAccess
        allowingReadAccessToURL
        // // baseURL='./assets/webview/'
        // domStorageEnabled
        // allowUniversalAccessFromFileURLs
        // allowFileAccessFromFileURLs
        geolocationEnabled
        mediaPlaybackRequiresUserAction={false}
        javaScriptEnabled
        // source={{ uri: 'https://maamoon95.github.io/react-native-smartVideo/assets/webview/index.html' }}
        source={{ uri: 'http://192.168.1.190:4100/assets/webview/index.html' }}
      />
      <View>
        <LottieView
          autoPlay
          autoSize
          ref={animationRef}
          resizeMode='contain'
          style={!loading
            ? { display: 'none' }
            : {
                backgroundColor: 'rgb(219 ,234, 254)'
              }}
        // Find more Lottie files at https://lottiefiles.com/featured
          source={require('./assets/lottieAnimation/loading.json')}
        />
        <Text className='text-center text-2xl'>
          Please Wait ..
        </Text>
      </View>
      <CallForm // ({webViewRef, started, setStarted, setLoading})
        isReady={isReady}
        webViewRef={webViewRef}
        startCall={startCall}
        started={started}
        loading={loading}
        setStarted={setStarted}
        setLoading={setLoading}
      />

      <StatusBar style='auto' />
    </View>
  );
}
const styles = StyleSheet.create({
  hidden: {
    width: 0,
    height: 0,
    opacity: 0,
    overflow: 'hidden',
    display: 'none'
  },
  show: {
    width: '100%',
    height: '100%',
    opacity: 1
  }

});
